{"ast":null,"code":"import axios from \"axios\";\nimport HandleError from \"./HandleError\";\nimport { logoutSuccess } from \"../redux/user/userSlice\";\nimport { store } from \"../redux/store\";\nimport { CreateToast } from \"./Toast\";\nimport requestIp from \"request-ip\";\n// Create an axios instance with default configuration\nconst instance = axios.create({\n  baseURL: process.env.REACT_APP_API_BASE_URL,\n  withCredentials: true,\n  // Send cookies with every request\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n\n// Add a request interceptor to handle HTTP requests before they are sent\ninstance.interceptors.request.use(config => {\n  const {\n    headers\n  } = config;\n  const clientIp = requestIp.getClientIp(config);\n  console.log(clientIp);\n  headers[\"X-Forwarded-For\"] = clientIp;\n  config.headers = headers;\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// // Add a response interceptor to handle HTTP responses before they are returned to the application\ninstance.interceptors.response.use(response => {\n  // Do something with the response data\n  return response;\n}, error => {\n  if (error.code === \"ERR_NETWORK\") {\n    CreateToast(\"Networkerror\", \"Server Down\", \"error\");\n    console.log(\"Network error occurred.\");\n  }\n  if (error.code === \"ECONNABORTED\") {\n    CreateToast(\"Timeouterror\", \"Timeout error\", \"error\");\n  }\n  HandleError(error, error => {\n    store.dispatch(logoutSuccess());\n  });\n  console.log(\"Error\", error);\n  return Promise.reject(error);\n});\nexport default instance;","map":{"version":3,"names":["axios","HandleError","logoutSuccess","store","CreateToast","requestIp","instance","create","baseURL","process","env","REACT_APP_API_BASE_URL","withCredentials","headers","interceptors","request","use","config","clientIp","getClientIp","console","log","error","Promise","reject","response","code","dispatch"],"sources":["D:/Project/QuickCart/ticket-master-dashboard/src/utils/Axios.tsx"],"sourcesContent":["import axios from \"axios\";\nimport HandleError from \"./HandleError\";\nimport { useDispatch } from \"react-redux\";\nimport { logoutSuccess } from \"../redux/user/userSlice\";\nimport { store } from \"../redux/store\";\nimport { CreateToast } from \"./Toast\";\nimport requestIp from \"request-ip\";\nimport { request } from \"http\";\n\n// Create an axios instance with default configuration\nconst instance = axios.create({\n  baseURL: process.env.REACT_APP_API_BASE_URL,\n  withCredentials: true, // Send cookies with every request\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// Add a request interceptor to handle HTTP requests before they are sent\ninstance.interceptors.request.use(\n  (config) => {\n    const { headers } = config;\n    const clientIp = requestIp.getClientIp(config);\n    console.log(clientIp);\n    headers[\"X-Forwarded-For\"] = clientIp;\n    config.headers = headers;\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// // Add a response interceptor to handle HTTP responses before they are returned to the application\ninstance.interceptors.response.use(\n  (response) => {\n    // Do something with the response data\n    return response;\n  },\n  (error) => {\n    if (error.code === \"ERR_NETWORK\") {\n      CreateToast(\"Networkerror\", \"Server Down\", \"error\");\n      console.log(\"Network error occurred.\");\n    }\n    if (error.code === \"ECONNABORTED\") {\n      CreateToast(\"Timeouterror\", \"Timeout error\", \"error\");\n    }\n    HandleError(error, (error) => {\n      store.dispatch(logoutSuccess());\n    });\n    console.log(\"Error\", error);\n    return Promise.reject(error);\n  }\n);\n\nexport default instance;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,eAAe;AAEvC,SAASC,aAAa,QAAQ,yBAAyB;AACvD,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,WAAW,QAAQ,SAAS;AACrC,OAAOC,SAAS,MAAM,YAAY;AAGlC;AACA,MAAMC,QAAQ,GAAGN,KAAK,CAACO,MAAM,CAAC;EAC5BC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,sBAAsB;EAC3CC,eAAe,EAAE,IAAI;EAAE;EACvBC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAP,QAAQ,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,IAAK;EACV,MAAM;IAAEJ;EAAQ,CAAC,GAAGI,MAAM;EAC1B,MAAMC,QAAQ,GAAGb,SAAS,CAACc,WAAW,CAACF,MAAM,CAAC;EAC9CG,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC;EACrBL,OAAO,CAAC,iBAAiB,CAAC,GAAGK,QAAQ;EACrCD,MAAM,CAACJ,OAAO,GAAGA,OAAO;EACxB,OAAOI,MAAM;AACf,CAAC,EACAK,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CACF;;AAED;AACAhB,QAAQ,CAACQ,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC/BS,QAAQ,IAAK;EACZ;EACA,OAAOA,QAAQ;AACjB,CAAC,EACAH,KAAK,IAAK;EACT,IAAIA,KAAK,CAACI,IAAI,KAAK,aAAa,EAAE;IAChCtB,WAAW,CAAC,cAAc,EAAE,aAAa,EAAE,OAAO,CAAC;IACnDgB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;EACxC;EACA,IAAIC,KAAK,CAACI,IAAI,KAAK,cAAc,EAAE;IACjCtB,WAAW,CAAC,cAAc,EAAE,eAAe,EAAE,OAAO,CAAC;EACvD;EACAH,WAAW,CAACqB,KAAK,EAAGA,KAAK,IAAK;IAC5BnB,KAAK,CAACwB,QAAQ,CAACzB,aAAa,EAAE,CAAC;EACjC,CAAC,CAAC;EACFkB,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,KAAK,CAAC;EAC3B,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CACF;AAED,eAAehB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}